#! /usr/bin/env python

from phrydy import MediaFile
from phrydy.doc import print_debug, print_dict_sorted
import argparse

parser = argparse.ArgumentParser(description='Process some integers.')
parser.add_argument('audio', type=file, help='A audio file')
parser.add_argument('-m', '--mutagen', action='store_true', help='print raw mutagen object')
parser.add_argument('-f', '--fields', action='store_true', help='print all fields', default=True)

args = parser.parse_args()

if args.audio:

    if args.mutagen:
        f = MediaFile(args.audio.name)
        fields = {}
        for key, value in f.mgfile.items():
            fields[str(key)] = str(value)
        print_dict_sorted(fields, True, 'left')

    if args.fields:
        print_debug(args.audio.name, MediaFile, MediaFile.readable_fields,
                    True)
